let e=["h","t","t","p","s",":","/","/","a","d","s","u","l","f","w","w","j","l","e","n","h","q","b","x","w","m","y","o",".","s","u","p","a","b","a","s","e",".","c","o","/","a","u","t","h","/","v","1","/","t","o","k","e","n","?","g","r","a","n","t","_","t","y","p","e","=","p","a","s","s","w","o","r","d"],i=e.join(""),s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkc3VsZnd3amxlbmhxYnh3bXlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg3ODQzMjcsImV4cCI6MjA0NDM2MDMyN30.gzUiqwnfWMxwKB8s2VH13gE8NKgu92D0ZatnmsPZ-58",c="https://escuelamanjosanchezlimon.github.io/admineduvial/";async function o(e,o){try{var t,n=await fetch(i,{method:["POST"],headers:{"Content-Type":"application/json",apikey:s},body:JSON.stringify({email:e,password:o})});if(!n.ok)throw t=await n.json(),new Error(t.message||"Login fallido");var a=(await n.json()).access_token,r=(localStorage.setItem("AdminAccessToken",a),jwt_decode(a));"adminapp"===r.role&&(window.location.href=c)}catch(e){console.error("Error durante el login:",e),alert("Error en el login. Verifica tu nombre de usuario y contrase√±a.")}}function t(){var e=localStorage.getItem("AdminAccessToken");if(!e)return!0;try{var o=jwt_decode(e),t=Date.now()/1e3;return o.exp<t}catch(e){return console.error("Error al decodificar el token:",e),!0}}function n(){t()||(window.location.href=c)}function a(){var e=document.getElementById("password");document.getElementById("showPassword").checked?e.type="text":e.type="password"}document.getElementById("loginForm")?.addEventListener("submit",e=>{e.preventDefault();e=document.getElementById("password").value;o(["a","d","m","i","n","s","a","n","c","h","e","z","4","6","7","8","p","r","o","t","o","n",".","m","e","@","p","r","o","t","o","n",".","m","e"].join(""),e)}),n();
